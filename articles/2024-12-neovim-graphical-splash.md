---
title: "Neovim ã«ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ãªèµ·å‹•ç”»é¢ã¯è¦ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ"
emoji: "ğŸ‘‹"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [linux, neovim]
published: false
---

# ã¯ã˜ã‚ã«

Neovim ã¨ã¯ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã§å‹•ä½œã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã§ã™ã€‚
è±Šå¯Œãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ç”¨ã„ã¦è¨­å®šã‚’ã™ã‚‹ã¨ã€VSCodeã®ã‚ˆã†ãªé«˜æ©Ÿèƒ½ã‚¨ãƒ‡ã‚£ã‚¿ã¸ã¨åŒ–ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ä½¿ã†ç†ç”±ã¯äººã«ã‚ˆã‚Šæ§˜ã€…ã§ã™ãŒã€ç†±ç‹‚çš„ãªä¿¡è€…ãŒå¤šã„ã§ã™ã­ç¬‘ã€‚

ç§ã‚’å«ã‚ã€å¤šãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã‚¤ã‚±ã¦ã‚‹ã‚ªãƒ¬ã‚ªãƒ¬è¨­å®šã‚’ä½œã‚‹éŠã³ã‚’ã—ã¦ã„ã‚‹ã®ã§ã™ãŒã€
ã›ã£ã‹ãè¨­å®šã—ãŸã®ã§ä¸€éƒ¨ç´¹ä»‹ã—ã‚ˆã†ã¨æ€ã„è¨˜äº‹ã«ã—ã¾ã—ãŸã€‚
Neovim éŠã³ã«èˆˆå‘³ã‚’æŒã£ã¦ãã‚ŒãŸã‚‰å¬‰ã—ã„ã§ã™ã€‚

# ä»Šå›ã®ãƒ†ãƒ¼ãƒ

Neovim ãŒèµ·å‹•ã—ãŸã¨ãã®ç”»é¢ã‚’ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ã«ã—ã¦ã‹ã£ã“ã‚ˆãã™ã‚‹â†“

æ¯”è¼ƒå¯¾è±¡ã¨ã—ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®èµ·å‹•ç”»é¢ã¯ã“ã‚“ãªæ„Ÿã˜ã§ã™ã€‚

# å¿…è¦ãªã‚‚ã®

- OS: Linux Desktop ã¾ãŸã¯ MacOS
- ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼: [Kitty](https://github.com/kovidgoyal/kitty)
- ã‚¨ãƒ‡ã‚£ã‚¿: Neovim
- ãã®ä»–: ImageMagick

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã«ç”»åƒã‚’è¡¨ç¤ºã™ã‚‹éƒ½åˆä¸Šã€ç’°å¢ƒã®åˆ¶ç´„ãŒå³ã—ããªã£ã¦ã„ã¾ã™ã€‚
è©³ç´°ã¯ä»¥ä¸‹ã®ãƒšãƒ¼ã‚¸ã‚’ã”è¦§ãã ã•ã„ [3rd/image.nvim](https://github.com/3rd/image.nvim) 

# ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ã¯ **Lazy.nvim** ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚

## Image.nvim

ã¾ãšã¯ Neovim ã§ç”»åƒã‚’è¡¨ç¤ºã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ **3rd/image.nvim** ã®å°å…¥ã§ã™ã€‚

Kitty ä»¥å¤–ã®ç’°å¢ƒã§ã‚‚åŒã˜è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã„ãŸã„ã®ã§ã€ä»¥ä¸‹ã®å¼ã‚’ä½¿ã„ã€ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æœ‰åŠ¹ãƒ»ç„¡åŠ¹ã‚’è‡ªå‹•ã§åˆ‡ã‚Šæ›¿ãˆã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```lua
os.getenv("TERM") == "xterm-kitty" -- kitty ã§ã‚ã‚Œã° true
```

Image.nvim ã«ã¯ç”»åƒã‚’æ‰±ã†ãŸã‚ã®APIãŒç”¨æ„ã•ã‚Œã¦ãŠã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«ä½ç½®ã‚’æŒ‡å®šã—ã¦ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ã€‚

```lua
local api = require("image")
                        local image = api.from_file("/path-to-image.png", {
                                x = math.floor(vim.api.nvim_win_get_width(0) / 2 - 50), // ä¸­å¤®ã«é…ç½®
                                y = 10,
                                width = 100,
                        })
```

ã“ã®ã‚ˆã†ã«ã—ã¦ç”»åƒã‚’èª­ã¿è¾¼ã‚“ã§


```lua
image:show()
image:clear()
```

ã®ã‚ˆã†ã«ã—ã¦ç°¡å˜ã«è¡¨ç¤ºéè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã¾ã™ã€‚

## Alpha.nvim

æ¬¡ã«ã€èµ·å‹•ç”»é¢ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹è¨­å®šã§ã™ã€‚**Alpha.nvim** ã‚’ä½µç”¨ã—ã¦ã„ã¾ã™ã€‚

**image.nvim** ã¯APIã‚’æä¾›ã—ã¦ã„ã‚‹ã®ã§ã€ä»»æ„ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ä»»æ„ã®å ´æ‰€ã«ç”»åƒã‚’å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚

**Alpha.nvim** èµ·å‹•æ™‚ã® Autocmd ã§ç”»åƒè¡¨ç¤ºã‚’è¡Œã„ã€`BufEnter` ã® Autocmd ã§ç”»åƒã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã€‚`AlphaClosed` ã¨ã„ã† Autocmd ã‚‚ã‚ã‚‹ã®ã§ã™ãŒã€ã“ã¡ã‚‰ã ã¨ãƒãƒƒãƒ•ã‚¡ã‚’ãƒ•ãƒ­ãƒ¼ãƒˆã§é–‹ã„ãŸã¨ãã«ã¯ç™ºç«ã—ãªã„ã‚ˆã†ã§ã€é‡ãªã£ã¦è¦‹ã¥ã‚‰ããªã£ã¦ã—ã¾ã†ã®ã§ä½¿ç”¨ã—ã¾ã›ã‚“ã§ã—ãŸã€‚

```lua
local image = ...
...

vim.api.nvim_create_autocmd({ "User" }, {
                                        callback = function()
                                                image:render()
                                        end,
                                        pattern = "AlphaReady",
                                })

                                vim.api.nvim_create_autocmd({ "BufEnter" }, {
                                        callback = function()
                                                image:clear()
                                        end,
```

å…ˆç¨‹ã¨åŒæ§˜ã€Kitty ãŒã‚ã‚‹æ™‚ã¨ãªã„ã¨ãã§å‡¦ç†ã‚’åˆ†å²ã•ã›ã¦ã„ã¾ã™ã€‚

```lua title="~/.config/nvim/lua/plugins/alpha.lua"
return {
        "goolord/alpha-nvim",
        dependencies = {
                { "nvim-tree/nvim-web-devicons" },
                { "3rd/image.nvim", opts = true, lazy = false },
        },
        config = function()
                local alpha = require("alpha")

                vim.api.nvim_set_hl(0, "CustomAlphaHeader", { fg = "#00ffff", bold = true })
                vim.api.nvim_set_hl(0, "CustomAlphaFooter", { fg = "#00ffff", bold = true })
                local dashboard = require("alpha.themes.dashboard")
                dashboard.section.header.val = {}
                dashboard.section.header.opts.hl = "CustomAlphaHeader"
                dashboard.section.footer.opts.hl = "CustomAlphaFooter"
                dashboard.section.header.opts.position = "center"
                vim.api.nvim_set_hl(0, "CustomAlphaHeader", { fg = "#039393", bold = true })
                dashboard.section.buttons.val = {}

                if os.getenv("TERM") == "xterm-kitty" then
                        local api = require("image")
                        local image = api.from_file("/home/ojii3/dotfiles/images/Bronie_Haxxor_Bunny_M.png", {
                                x = math.floor(vim.api.nvim_win_get_width(0) / 2) - 50,
                                y = 10,
                                width = 100,
                        })
                        if image ~= nil then
                                -- dashboard.section.buttons.val = {}
                                dashboard.section.header.val = {
                                        [[        .;        ;.                                                                    ]],
                                        [[      .,l,'.      ;l;.                                           ;;;                    ]],
                                        [[     ;odl;,,'     ;bcc:                                                                 ]],
                                        [[     cddl;,;:,.   ;bccc.    :l.:'',.   :'''l.  .:''':. ox;   .dx.dx, ox:odxc'ldxxl.     ]],
                                        [[     cccl;,;:;,.  ;llll.    :d     b .c     ;..c     ;:.kk.  dO' kO; xO:  ;OO'  oOc     ]],
                                        [[     cccl; .;;;;, ;llll.    :l     d.;d.....d.c'      d .kx lO:  kO; xO,  'OO.  cOl     ]],
                                        [[     lccl;  .;;;;;;looo.    :l     d..c       ';     .l  ;OdOo   kO; xO,  'OO.  cOl     ]],
                                        [[     llll,    ,:;:;ldoo.    :l     d  '':..:'  ''...''    cdo    dx, x0'  .00.  :0l     ]],
                                        [[     clll;     '::;ldoo.                                                                ]],
                                        [[      .co;      .:;dl,                                                                  ]],
                                        [[        .;        ;'                                                                    ]],
                                }

                                vim.api.nvim_create_autocmd({ "User" }, {
                                        callback = function()
                                                image:render()
                                        end,
                                        pattern = "AlphaReady",
                                })

                                vim.api.nvim_create_autocmd({ "User" }, {
                                        callback = function()
                                                image:clear()
                                        end,
                                        pattern = { "AlphaClosed" },
                                })
                                vim.api.nvim_create_autocmd({ "BufEnter" }, {
                                        callback = function()
                                                image.clear(image)
                                        end,
                                        pattern = { "*" },
                                })

                                -- dashboard.config.opts.noautocmd = true
                                vim.cmd([[
          autocmd User AlphaReady echo 'Ready!'
        ]])
                                alpha.setup(dashboard.config)
                                return
                        end
                end
                dashboard.section.buttons.val = {}
                dashboard.section.header.val = {
                        [[                                                          ]],
                        [[                                                          ]],
                        [[         some ascii art or something here                 ]],
                        [[                                                          ]],
                }

                dashboard.config.opts.noautocmd = true
                vim.cmd([[
      autocmd User AlphaReady echo 'Ready!'
    ]])
                alpha.setup(dashboard.config)
        end,
}
```


